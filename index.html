<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="assets/css/grid.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQmxhY2sub3RmJm49YW1lbGlhLWJhc2ljLWJsYWNr/Amelia-Basic-Black.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQmxhY2tJdGFsaWMub3RmJm49YW1lbGlhLWJhc2ljLWJsYWNraXRhbGljLTM/Amelia-Basic-BlackItalic.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQm9sZC5vdGYmbj1hbWVsaWEtYmFzaWMtYm9sZC01/Amelia-Basic-Bold.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQm9sZEl0YWxpYy5vdGYmbj1hbWVsaWEtYmFzaWMtYm9sZGl0YWxpYy03/Amelia-Basic-BoldItalic.otf"
        rel="stylesheet" type="text/css" />
</head>

<body>
    <form class="form">
        <fieldset>
            <label for="csvFileInput"> <strong>Arquivo CSV:</strong>
            </label>
            <input type="file" id="csvFileInput" onchange="handleFiles(this.files)" accept=".csv">
            </div>
        </fieldset>
    </form>
    <div id="output">

    </div>

    <div id="boletim">
        <header class="main container">
            <img src="assets/img/header-top-img.png" />
            <div class="text">
                <h1>BOLETIM INFORMATIVO <span>N° 303</span></h1>
                <div class="info">
                    <p>DATA: <span id="date"></span> - HORA: 17:00 - Marechal Floriano - ES</p>
                </div>
            </div>
        </header>
        <main class="mdc-layout-grid boletim container">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box notificados">
                        <header>NOTIFICADOS</header>
                        <div class="number" id="notificados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box descartados">
                        <header>DESCARTADOS</header>
                        <div class="number" id="descartados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box suspeito-monitor">
                        <header>SUSPEITOS EM <br /> MONITORAMENTO</header>
                        <div class="number" id="monitoramento"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box suspeito-melhora">
                        <header>SUSPEITOS <br /> <span>*MELHORA CLÍNICA</span></header>
                        <div class="number" id="melhora"></div>
                    </div>
                </div>
            </div>
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box confirmados">
                        <header>CONFIRMADOS</header>
                        <div class="number" id="confirmados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box hospitalizados">
                        <header>HOSPITALIZADOS</header>
                        <div class="number" id="hospitalizados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box curados">
                        <header>CURADOS</header>
                        <div class="number" id="curados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box obitos">
                        <header>ÓBITOS</span></header>
                        <div class="number" id="obitos"></div>
                    </div>
                </div>
            </div>
            <div class="mdc-layout-grid__inner infor">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
                    * Suspeitos com melhora clínica: pacientes que apresentam síndrome gripal com melhora após 14 dias do
                    início dos sintomas, porém não se enquadram no critério para testagem laboratorial estabelecido pela
                    Nota Técnica n° 29 da Sesa.
                </div>
            </div>
            <div class="mdc-layout-grid__inner numeros">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                    <div class="cidade centro">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade santa-rita">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade jarbinhas">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade santa-maria">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade soido-de-baixo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade araguaia">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade alto-marechal">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade victor-hugo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade vila-das-orquideas">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade costa-pereira">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade vale-das-palmas">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                    <div class="cidade rio-fundo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade boa-esperanca">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade bom-jesus">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade alto-rio-fundo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade ponto-frio">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade vila-dos-ipes">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade estrada-do-caracol": <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade alto-santa-maria">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade trevo-de-paraju">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade alto-nova-almeida">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade vila-schunk">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                    <div class="cidade vila-nova">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade batatal">:<span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade barra-do-rio-fundo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade serraria-kiefer">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade campo-do-apolo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade nossa-senhora-da-penha">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade poco-fundo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade alto-victor-hugo">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade santa-rosa-de-araguaia">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div class="cidade recreio-ponto-alto">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                </div>
            </div>
            <div class="mdc-layout-grid__inner legenda">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-5 mapa">
                    <div class="confirmados">
                        <div class="sqr"></div> CONFIRMADOS
                    </div>
                    <div class="curados">
                        <div class="sqr"></div> CURADOS
                    </div>
                    <div class="obitos">
                        <div class="sqr"></div> ÓBITOS
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-7 info">
                    * Dados pessoais dos pacientes são invioláveis de acordo com a Constituição Federal, estando protegidos
                    por sigilo pela Lei 13.709/2018 (Lei Geral de Proteção de Dados Pessoais).
                </div>
            </div>
        </main>
        <footer class="container">
            <img src="assets/img/header-botton-img.png" />
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js" integrity="sha512-s/XK4vYVXTGeUSv4bRPOuxSDmDlTedEpMEcAQk0t/FMd9V6ft8iXdwSBxV0eD60c6w/tjotSlKu9J2AAW1ckTA==" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script type="text/javascript">
        function handleFiles(files) {
            // Check for the various File API support.
            if (window.FileReader) {
                // FileReader are supported.
                getAsText(files[0]);
            } else {
                alert('FileReader are not supported in this browser.');
            }
        }

        function getAsText(fileToRead) {
            var reader = new FileReader();
            // Handle errors load
            reader.onload = loadHandler;
            reader.onerror = errorHandler;
            // Read file into memory as UTF-8      
            reader.readAsText(fileToRead);
        }

        function loadHandler(event) {
            var csv = event.target.result;
            processData(csv);
        }

        function processData(csv) {
            var allTextLines = csv.split(/\r\n|\n/);
            var lines = [];
            while (allTextLines.length) {
                lines.push(allTextLines.shift().split(','));
            }
            console.log(lines);
            createBoletim(lines);
        }

        function errorHandler(evt) {
            if (evt.target.error.name == "NotReadableError") {
                alert("Cannot read file !");
            }
        }

        function createBoletim(lines) {

            var date = lines[1][2];

            function dataAtualFormatada(){
                var data = new Date(),
                    dia  = data.getDate().toString(),
                    diaF = (dia.length == 1) ? '0'+dia : dia,
                    mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.
                    mesF = (mes.length == 1) ? '0'+mes : mes,
                    anoF = data.getFullYear();
                return diaF+"/"+mesF+"/"+anoF;
            }

            $('#date').text(dataAtualFormatada());

            $('#notificados').text(lines[3][2].slice(1, -1));
            $('#descartados').text(lines[4][2].slice(1, -1));
            $('#monitoramento').text(lines[5][2].slice(1, -1));
            $('#melhora').text(lines[6][2].slice(1, -1));
            $('#confirmados').text(lines[7][2].slice(1, -1));
            $('#hospitalizados').text(lines[8][2].slice(1, -1));
            $('#curados').text(lines[9][2].slice(1, -1));
            $('#obitos').text(lines[10][2].slice(1, -1));

            $('.centro').prepend(lines[14][1].slice(1, -1).toUpperCase());
            $('.centro .confirmados').text(lines[14][2].slice(1, -1));
            $('.centro .curados').text(lines[14][3].slice(1, -1));
            $('.centro .obitos').text(lines[14][4].slice(1, -1));

            $('.santa-rita').prepend(lines[15][1].slice(1, -1));
            $('.santa-rita .confirmados').text(lines[15][2].slice(1, -1));
            $('.santa-rita .curados').text(lines[15][3].slice(1, -1));
            $('.santa-rita .obitos').text(lines[15][4].slice(1, -1));

            $('.jarbinhas').prepend(lines[16][1].slice(1, -1));
            $('.jarbinhas .confirmados').text(lines[16][2].slice(1, -1));
            $('.jarbinhas .curados').text(lines[16][3].slice(1, -1));
            $('.jarbinhas .obitos').text(lines[16][4].slice(1, -1));

            $('.santa-maria').prepend(lines[17][1].slice(1, -1));
            $('.santa-maria .confirmados').text(lines[17][2].slice(1, -1));
            $('.santa-maria .curados').text(lines[17][3].slice(1, -1));
            $('.santa-maria .obitos').text(lines[17][4].slice(1, -1));

            $('.soido-de-baixo').prepend(lines[18][1].slice(1, -1));
            $('.soido-de-baixo .confirmados').text(lines[18][2].slice(1, -1));
            $('.soido-de-baixo .curados').text(lines[18][3].slice(1, -1));
            $('.soido-de-baixo .obitos').text(lines[18][4].slice(1, -1));

            $('.alto-marechal').prepend(lines[19][1].slice(1, -1));
            $('.alto-marechal .confirmados').text(lines[19][2].slice(1, -1));
            $('.alto-marechal .curados').text(lines[19][3].slice(1, -1));
            $('.alto-marechal .obitos').text(lines[19][4].slice(1, -1));

            $('.araguaia').prepend(lines[20][1].slice(1, -1));
            $('.araguaia .confirmados').text(lines[20][2].slice(1, -1));
            $('.araguaia .curados').text(lines[20][3].slice(1, -1));
            $('.araguaia .obitos').text(lines[20][4].slice(1, -1));

            $('.victor-hugo').prepend(lines[21][1].slice(1, -1));
            $('.victor-hugo .confirmados').text(lines[21][2].slice(1, -1));
            $('.victor-hugo .curados').text(lines[21][3].slice(1, -1));
            $('.victor-hugo .obitos').text(lines[21][4].slice(1, -1));

            
            $('.vila-das-orquideas').prepend(lines[22][1].slice(1, -1));
            $('.vila-das-orquideas .confirmados').text(lines[22][2].slice(1, -1));
            $('.vila-das-orquideas .curados').text(lines[22][3].slice(1, -1));
            $('.vila-das-orquideas .obitos').text(lines[22][4].slice(1, -1));

            $('.costa-pereira').prepend(lines[23][1].slice(1, -1));
            $('.costa-pereira .confirmados').text(lines[23][2].slice(1, -1));
            $('.costa-pereira .curados').text(lines[23][3].slice(1, -1));
            $('.costa-pereira .obitos').text(lines[23][4].slice(1, -1));

            
            $('.vale-das-palmas').prepend(lines[24][1].slice(1, -1));
            $('.vale-das-palmas .confirmados').text(lines[24][2].slice(1, -1));
            $('.vale-das-palmas .curados').text(lines[24][3].slice(1, -1));
            $('.vale-das-palmas .obitos').text(lines[24][4].slice(1, -1));


            $('.rio-fundo').prepend(lines[25][1].slice(1, -1));
            $('.rio-fundo .confirmados').text(lines[25][2].slice(1, -1));
            $('.rio-fundo .curados').text(lines[25][3].slice(1, -1));
            $('.rio-fundo .obitos').text(lines[25][4].slice(1, -1));


            $('.boa-esperanca').prepend(lines[26][1].slice(1, -1));
            $('.boa-esperanca .confirmados').text(lines[26][2].slice(1, -1));
            $('.boa-esperanca .curados').text(lines[26][3].slice(1, -1));
            $('.boa-esperanca .obitos').text(lines[26][4].slice(1, -1));


            $('.bom-jesus').prepend(lines[27][1].slice(1, -1));
            $('.bom-jesus .confirmados').text(lines[27][2].slice(1, -1));
            $('.bom-jesus .curados').text(lines[27][3].slice(1, -1));
            $('.bom-jesus .obitos').text(lines[27][4].slice(1, -1));


            $('.alto-rio-fundo').prepend(lines[28][1].slice(1, -1));
            $('.alto-rio-fundo .confirmados').text(lines[28][2].slice(1, -1));
            $('.alto-rio-fundo .curados').text(lines[28][3].slice(1, -1));
            $('.alto-rio-fundo .obitos').text(lines[28][4].slice(1, -1));

            $('.ponto-frio').prepend(lines[29][1].slice(1, -1));
            $('.ponto-frio .confirmados').text(lines[29][2].slice(1, -1));
            $('.ponto-frio .curados').text(lines[29][3].slice(1, -1));
            $('.ponto-frio .obitos').text(lines[29][4].slice(1, -1));


            $('.vila-dos-ipes').prepend(lines[30][1].slice(1, -1));
            $('.vila-dos-ipes .confirmados').text(lines[30][2].slice(1, -1));
            $('.vila-dos-ipes .curados').text(lines[30][3].slice(1, -1));
            $('.vila-dos-ipes .obitos').text(lines[30][4].slice(1, -1));


            $('.alto-santa-maria').prepend(lines[31][1].slice(1, -1));
            $('.alto-santa-maria .confirmados').text(lines[31][2].slice(1, -1));
            $('.alto-santa-maria .curados').text(lines[31][3].slice(1, -1));
            $('.alto-santa-maria .obitos').text(lines[31][4].slice(1, -1));


            $('.estrada-do-caracol').prepend(lines[32][1].slice(1, -1));
            $('.estrada-do-caracol .confirmados').text(lines[32][2].slice(1, -1));
            $('.estrada-do-caracol .curados').text(lines[32][3].slice(1, -1));
            $('.estrada-do-caracol .obitos').text(lines[32][4].slice(1, -1));


            $('.alto-nova-almeida').prepend(lines[33][1].slice(1, -1));
            $('.alto-nova-almeida .confirmados').text(lines[33][2].slice(1, -1));
            $('.alto-nova-almeida .curados').text(lines[33][3].slice(1, -1));
            $('.alto-nova-almeida .obitos').text(lines[33][4].slice(1, -1));


            $('.trevo-de-paraju').prepend(lines[34][1].slice(1, -1));
            $('.trevo-de-paraju .confirmados').text(lines[34][2].slice(1, -1));
            $('.trevo-de-paraju .curados').text(lines[34][3].slice(1, -1));
            $('.trevo-de-paraju .obitos').text(lines[34][4].slice(1, -1));


            $('.vila-schunk').prepend(lines[35][1].slice(1, -1));
            $('.vila-schunk .confirmados').text(lines[35][2].slice(1, -1));
            $('.vila-schunk .curados').text(lines[35][3].slice(1, -1));
            $('.vila-schunk .obitos').text(lines[35][4].slice(1, -1));


            $('.vila-nova').prepend(lines[36][1].slice(1, -1));
            $('.vila-nova .confirmados').text(lines[36][2].slice(1, -1));
            $('.vila-nova .curados').text(lines[36][3].slice(1, -1));
            $('.vila-nova .obitos').text(lines[36][4].slice(1, -1));


            $('.batatal').prepend(lines[37][1].slice(1, -1));
            $('.batatal .confirmados').text(lines[37][2].slice(1, -1));
            $('.batatal .curados').text(lines[37][3].slice(1, -1));
            $('.batatal .obitos').text(lines[37][4].slice(1, -1));


            $('.barra-do-rio-fundo').prepend(lines[38][1].slice(1, -1));
            $('.barra-do-rio-fundo .confirmados').text(lines[38][2].slice(1, -1));
            $('.barra-do-rio-fundo .curados').text(lines[38][3].slice(1, -1));
            $('.barra-do-rio-fundo .obitos').text(lines[38][4].slice(1, -1));


            $('.serraria-kiefer').prepend(lines[39][1].slice(1, -1));
            $('.serraria-kiefer .confirmados').text(lines[39][2].slice(1, -1));
            $('.serraria-kiefer .curados').text(lines[39][3].slice(1, -1));
            $('.serraria-kiefer .obitos').text(lines[39][4].slice(1, -1));
            

            $('.campo-do-apolo').prepend(lines[40][1].slice(1, -1));
            $('.campo-do-apolo .confirmados').text(lines[40][2].slice(1, -1));
            $('.campo-do-apolo .curados').text(lines[40][3].slice(1, -1));
            $('.campo-do-apolo .obitos').text(lines[40][4].slice(1, -1));


            $('.nossa-senhora-da-penha').prepend(lines[41][1].slice(1, -1));
            $('.nossa-senhora-da-penha .confirmados').text(lines[41][2].slice(1, -1));
            $('.nossa-senhora-da-penha .curados').text(lines[41][3].slice(1, -1));
            $('.nossa-senhora-da-penha .obitos').text(lines[41][4].slice(1, -1));


            $('.alto-victor-hugo').prepend(lines[42][1].slice(1, -1));
            $('.alto-victor-hugo .confirmados').text(lines[42][2].slice(1, -1));
            $('.alto-victor-hugo .curados').text(lines[42][3].slice(1, -1));
            $('.alto-victor-hugo .obitos').text(lines[42][4].slice(1, -1));


            $('.poco-fundo').prepend(lines[43][1].slice(1, -1));
            $('.poco-fundo .confirmados').text(lines[43][2].slice(1, -1));
            $('.poco-fundo .curados').text(lines[43][3].slice(1, -1));
            $('.poco-fundo .obitos').text(lines[43][4].slice(1, -1));


            $('.recreio-ponto-alto').prepend(lines[44][1].slice(1, -1));
            $('.recreio-ponto-alto .confirmados').text(lines[44][2].slice(1, -1));
            $('.recreio-ponto-alto .curados').text(lines[44][3].slice(1, -1));
            $('.recreio-ponto-alto .obitos').text(lines[44][4].slice(1, -1));


            $('.santa-rosa-de-araguaia').prepend(lines[45][1].slice(1, -1));
            $('.santa-rosa-de-araguaia .confirmados').text(lines[45][2].slice(1, -1));
            $('.santa-rosa-de-araguaia .curados').text(lines[45][3].slice(1, -1));
            $('.santa-rosa-de-araguaia .obitos').text(lines[45][4].slice(1, -1));
        }
        

    </script>
</body>

</html>