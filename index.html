<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="assets/css/grid.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQmxhY2sub3RmJm49YW1lbGlhLWJhc2ljLWJsYWNr/Amelia-Basic-Black.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQmxhY2tJdGFsaWMub3RmJm49YW1lbGlhLWJhc2ljLWJsYWNraXRhbGljLTM/Amelia-Basic-BlackItalic.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQm9sZC5vdGYmbj1hbWVsaWEtYmFzaWMtYm9sZC01/Amelia-Basic-Bold.otf"
        rel="stylesheet" type="text/css" />
    <link
        href="https://blogfonts.com/css/aWQ9MTUyNDM3JnN1Yj00MzcmYz1hJnR0Zj1BbWVsaWEtQmFzaWMtQm9sZEl0YWxpYy5vdGYmbj1hbWVsaWEtYmFzaWMtYm9sZGl0YWxpYy03/Amelia-Basic-BoldItalic.otf"
        rel="stylesheet" type="text/css" />
</head>

<body>
    <form class="form">
        <fieldset>
            <label for="csvFileInput"> <strong>Arquivo CSV:</strong>
            </label>
            <input type="file" id="csvFileInput" onchange="handleFiles(this.files)" accept=".csv">
            </div>
        </fieldset>
    </form>
    <div id="output">

    </div>

    <div id="boletim">
        <header class="main container">
            <img src="assets/img/header-top-img.png" />
            <div class="text">
                <h1>BOLETIM INFORMATIVO <span>N° 303</span></h1>
                <div class="info">
                    <p>DATA: <span id="date"></span> - HORA: 17:00 - Marechal Floriano - ES</p>
                </div>
            </div>
        </header>
        <main class="mdc-layout-grid boletim container">
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box notificados">
                        <header>NOTIFICADOS</header>
                        <div class="number" id="notificados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box descartados">
                        <header>DESCARTADOS</header>
                        <div class="number" id="descartados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box suspeito-monitor">
                        <header>SUSPEITOS EM <br /> MONITORAMENTO</header>
                        <div class="number" id="monitoramento"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box suspeito-melhora">
                        <header>SUSPEITOS <br /> <span>*MELHORA CLÍNICA</span></header>
                        <div class="number" id="melhora"></div>
                    </div>
                </div>
            </div>
            <div class="mdc-layout-grid__inner">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box confirmados">
                        <header>CONFIRMADOS</header>
                        <div class="number" id="confirmados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box hospitalizados">
                        <header>HOSPITALIZADOS</header>
                        <div class="number" id="hospitalizados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box curados">
                        <header>CURADOS</header>
                        <div class="number" id="curados"></div>
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
                    <div class="box obitos">
                        <header>ÓBITOS</span></header>
                        <div class="number" id="obitos"></div>
                    </div>
                </div>
            </div>
            <div class="mdc-layout-grid__inner infor">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
                    * Suspeitos com melhora clínica: pacientes que apresentam síndrome gripal com melhora após 14 dias do
                    início dos sintomas, porém não se enquadram no critério para testagem laboratorial estabelecido pela
                    Nota Técnica n° 29 da Sesa.
                </div>
            </div>
            <div class="mdc-layout-grid__inner numeros">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                    <div id="1" class="bairro um">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="2" class="bairro dois">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="3" class="bairro tres">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="4" class="bairro quatro">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="5" class="bairro cinco">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="6" class="bairro seis">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="7" class="bairro sete">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="8" class="bairro oito">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="9" class="bairro nove">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="10" class="bairro dez">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="11" class="bairro onze">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                    <div id="12" class="bairro doze">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="13" class="bairro treze">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="14" class="bairro quatorze">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="15" class="bairro quinze">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="16" class="bairro dezesseis">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="17" class="bairro dezessete">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="18" class="bairro dezoito": <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="19" class="bairro dezenove">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="20" class="bairro vinte">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="21" class="bairro vinteeum">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="22" class="bairro vinteedois">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-4">
                    <div id="23" class="bairro vinteetres">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="24" class="bairro vinteequatro">:<span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="25" class="bairro vinteecinco">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="26" class="bairro vinteeseis">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="27" class="bairro vinteesete">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="28" class="bairro vinteeoito">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="29" class="bairro vinteenove">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="30" class="bairro trinta">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="31" class="bairro trintaeum">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                    <div id="32" class="bairro trintaedois">: <span class="confirmados"></span> / <span class="curados"></span> / <span class="obitos"></span></div>
                </div>
            </div>
            <div class="mdc-layout-grid__inner legenda">
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-5 mapa">
                    <div class="confirmados">
                        <div class="sqr"></div> CONFIRMADOS
                    </div>
                    <div class="curados">
                        <div class="sqr"></div> CURADOS
                    </div>
                    <div class="obitos">
                        <div class="sqr"></div> ÓBITOS
                    </div>
                </div>
                <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-7 info">
                    * Dados pessoais dos pacientes são invioláveis de acordo com a Constituição Federal, estando protegidos
                    por sigilo pela Lei 13.709/2018 (Lei Geral de Proteção de Dados Pessoais).
                </div>
            </div>
        </main>
        <footer class="container">
            <img src="assets/img/header-botton-img.png" />
        </footer>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js" integrity="sha512-s/XK4vYVXTGeUSv4bRPOuxSDmDlTedEpMEcAQk0t/FMd9V6ft8iXdwSBxV0eD60c6w/tjotSlKu9J2AAW1ckTA==" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script type="text/javascript">
        function handleFiles(files) {
            // Check for the various File API support.
            if (window.FileReader) {
                // FileReader are supported.
                getAsText(files[0]);
            } else {
                alert('FileReader are not supported in this browser.');
            }
        }

        function getAsText(fileToRead) {
            var reader = new FileReader();
            // Handle errors load
            reader.onload = loadHandler;
            reader.onerror = errorHandler;
            // Read file into memory as UTF-8      
            reader.readAsText(fileToRead);
        }

        function loadHandler(event) {
            var csv = event.target.result;
            processData(csv);
        }

        function processData(csv) {
            var allTextLines = csv.split(/\r\n|\n/);
            var lines = [];
            while (allTextLines.length) {
                lines.push(allTextLines.shift().split(','));
            }
            console.log(lines);
            createBoletim(lines);
        }

        function errorHandler(evt) {
            if (evt.target.error.name == "NotReadableError") {
                alert("Cannot read file !");
            }
        }

        function createBoletim(lines) {

            var date = lines[1][2];

            function dataAtualFormatada(){
                var data = new Date(),
                    dia  = data.getDate().toString(),
                    diaF = (dia.length == 1) ? '0'+dia : dia,
                    mes  = (data.getMonth()+1).toString(), //+1 pois no getMonth Janeiro começa com zero.
                    mesF = (mes.length == 1) ? '0'+mes : mes,
                    anoF = data.getFullYear();
                return diaF+"/"+mesF+"/"+anoF;
            }

            $('#date').text(dataAtualFormatada());

            $('#notificados').text(lines[3][2].slice(1, -1));
            $('#descartados').text(lines[4][2].slice(1, -1));
            $('#monitoramento').text(lines[5][2].slice(1, -1));
            $('#melhora').text(lines[6][2].slice(1, -1));
            $('#confirmados').text(lines[7][2].slice(1, -1));
            $('#hospitalizados').text(lines[8][2].slice(1, -1));
            $('#curados').text(lines[9][2].slice(1, -1));
            $('#obitos').text(lines[10][2].slice(1, -1));

            $('#1').prepend(lines[14][1].slice(1, -1).toUpperCase());
            $('#1 .confirmados').text(lines[14][2].slice(1, -1));
            $('#1 .curados').text(lines[14][3].slice(1, -1));
            $('#1 .obitos').text(lines[14][4].slice(1, -1));

            $('#2').prepend(lines[15][1].slice(1, -1));
            $('#2 .confirmados').text(lines[15][2].slice(1, -1));
            $('#2 .curados').text(lines[15][3].slice(1, -1));
            $('#2 .obitos').text(lines[15][4].slice(1, -1));

            $('#3').prepend(lines[16][1].slice(1, -1));
            $('#3 .confirmados').text(lines[16][2].slice(1, -1));
            $('#3 .curados').text(lines[16][3].slice(1, -1));
            $('#3 .obitos').text(lines[16][4].slice(1, -1));

            $('#4').prepend(lines[17][1].slice(1, -1));
            $('#4 .confirmados').text(lines[17][2].slice(1, -1));
            $('#4 .curados').text(lines[17][3].slice(1, -1));
            $('#4 .obitos').text(lines[17][4].slice(1, -1));

            $('#5').prepend(lines[18][1].slice(1, -1));
            $('#5 .confirmados').text(lines[18][2].slice(1, -1));
            $('#5 .curados').text(lines[18][3].slice(1, -1));
            $('#5 .obitos').text(lines[18][4].slice(1, -1));

            $('#6').prepend(lines[19][1].slice(1, -1));
            $('#6 .confirmados').text(lines[19][2].slice(1, -1));
            $('#6 .curados').text(lines[19][3].slice(1, -1));
            $('#6 .obitos').text(lines[19][4].slice(1, -1));

            $('#7').prepend(lines[20][1].slice(1, -1));
            $('#7 .confirmados').text(lines[20][2].slice(1, -1));
            $('#7 .curados').text(lines[20][3].slice(1, -1));
            $('#7 .obitos').text(lines[20][4].slice(1, -1));

            $('#8').prepend(lines[21][1].slice(1, -1));
            $('#8 .confirmados').text(lines[21][2].slice(1, -1));
            $('#8 .curados').text(lines[21][3].slice(1, -1));
            $('#8 .obitos').text(lines[21][4].slice(1, -1));

            
            $('#9').prepend(lines[22][1].slice(1, -1));
            $('#9 .confirmados').text(lines[22][2].slice(1, -1));
            $('#9 .curados').text(lines[22][3].slice(1, -1));
            $('#9 .obitos').text(lines[22][4].slice(1, -1));

            $('#10').prepend(lines[23][1].slice(1, -1));
            $('#10 .confirmados').text(lines[23][2].slice(1, -1));
            $('#10 .curados').text(lines[23][3].slice(1, -1));
            $('#10 .obitos').text(lines[23][4].slice(1, -1));

            
            $('#11').prepend(lines[24][1].slice(1, -1));
            $('#11 .confirmados').text(lines[24][2].slice(1, -1));
            $('#11 .curados').text(lines[24][3].slice(1, -1));
            $('#11 .obitos').text(lines[24][4].slice(1, -1));


            $('#12').prepend(lines[25][1].slice(1, -1));
            $('#12 .confirmados').text(lines[25][2].slice(1, -1));
            $('#12 .curados').text(lines[25][3].slice(1, -1));
            $('#12 .obitos').text(lines[25][4].slice(1, -1));


            $('#13').prepend(lines[26][1].slice(1, -1));
            $('#13 .confirmados').text(lines[26][2].slice(1, -1));
            $('#13 .curados').text(lines[26][3].slice(1, -1));
            $('#13 .obitos').text(lines[26][4].slice(1, -1));


            $('#14').prepend(lines[27][1].slice(1, -1));
            $('#14 .confirmados').text(lines[27][2].slice(1, -1));
            $('#14 .curados').text(lines[27][3].slice(1, -1));
            $('#14 .obitos').text(lines[27][4].slice(1, -1));


            $('#15').prepend(lines[28][1].slice(1, -1));
            $('#15 .confirmados').text(lines[28][2].slice(1, -1));
            $('#15 .curados').text(lines[28][3].slice(1, -1));
            $('#15 .obitos').text(lines[28][4].slice(1, -1));

            $('#16').prepend(lines[29][1].slice(1, -1));
            $('#16 .confirmados').text(lines[29][2].slice(1, -1));
            $('#16 .curados').text(lines[29][3].slice(1, -1));
            $('#16 .obitos').text(lines[29][4].slice(1, -1));


            $('#17').prepend(lines[30][1].slice(1, -1));
            $('#17 .confirmados').text(lines[30][2].slice(1, -1));
            $('#17 .curados').text(lines[30][3].slice(1, -1));
            $('#17 .obitos').text(lines[30][4].slice(1, -1));


            $('#18').prepend(lines[31][1].slice(1, -1));
            $('#18 .confirmados').text(lines[31][2].slice(1, -1));
            $('#18 .curados').text(lines[31][3].slice(1, -1));
            $('#18 .obitos').text(lines[31][4].slice(1, -1));


            $('#19').prepend(lines[32][1].slice(1, -1));
            $('#19 .confirmados').text(lines[32][2].slice(1, -1));
            $('#19 .curados').text(lines[32][3].slice(1, -1));
            $('#19 .obitos').text(lines[32][4].slice(1, -1));


            $('#20').prepend(lines[33][1].slice(1, -1));
            $('#20 .confirmados').text(lines[33][2].slice(1, -1));
            $('#20 .curados').text(lines[33][3].slice(1, -1));
            $('#20 .obitos').text(lines[33][4].slice(1, -1));


            $('#21').prepend(lines[34][1].slice(1, -1));
            $('#21 .confirmados').text(lines[34][2].slice(1, -1));
            $('#21 .curados').text(lines[34][3].slice(1, -1));
            $('#21 .obitos').text(lines[34][4].slice(1, -1));


            $('#22').prepend(lines[35][1].slice(1, -1));
            $('#22 .confirmados').text(lines[35][2].slice(1, -1));
            $('#22 .curados').text(lines[35][3].slice(1, -1));
            $('#22 .obitos').text(lines[35][4].slice(1, -1));


            $('#23').prepend(lines[36][1].slice(1, -1));
            $('#23 .confirmados').text(lines[36][2].slice(1, -1));
            $('#23 .curados').text(lines[36][3].slice(1, -1));
            $('#23 .obitos').text(lines[36][4].slice(1, -1));


            $('#24').prepend(lines[37][1].slice(1, -1));
            $('#24 .confirmados').text(lines[37][2].slice(1, -1));
            $('#24 .curados').text(lines[37][3].slice(1, -1));
            $('#24 .obitos').text(lines[37][4].slice(1, -1));


            $('#25').prepend(lines[38][1].slice(1, -1));
            $('#25 .confirmados').text(lines[38][2].slice(1, -1));
            $('#25 .curados').text(lines[38][3].slice(1, -1));
            $('#25 .obitos').text(lines[38][4].slice(1, -1));


            $('#26').prepend(lines[39][1].slice(1, -1));
            $('#26 .confirmados').text(lines[39][2].slice(1, -1));
            $('#26 .curados').text(lines[39][3].slice(1, -1));
            $('#26 .obitos').text(lines[39][4].slice(1, -1));
            

            $('#27').prepend(lines[40][1].slice(1, -1));
            $('#27 .confirmados').text(lines[40][2].slice(1, -1));
            $('#27 .curados').text(lines[40][3].slice(1, -1));
            $('#27 .obitos').text(lines[40][4].slice(1, -1));


            $('#28').prepend(lines[41][1].slice(1, -1));
            $('#28 .confirmados').text(lines[41][2].slice(1, -1));
            $('#28 .curados').text(lines[41][3].slice(1, -1));
            $('#28 .obitos').text(lines[41][4].slice(1, -1));


            $('#29').prepend(lines[42][1].slice(1, -1));
            $('#29 .confirmados').text(lines[42][2].slice(1, -1));
            $('#29 .curados').text(lines[42][3].slice(1, -1));
            $('#29 .obitos').text(lines[42][4].slice(1, -1));


            $('#30').prepend(lines[43][1].slice(1, -1));
            $('#30 .confirmados').text(lines[43][2].slice(1, -1));
            $('#30 .curados').text(lines[43][3].slice(1, -1));
            $('#30 .obitos').text(lines[43][4].slice(1, -1));


            $('#31').prepend(lines[44][1].slice(1, -1));
            $('#31 .confirmados').text(lines[44][2].slice(1, -1));
            $('#31 .curados').text(lines[44][3].slice(1, -1));
            $('#31 .obitos').text(lines[44][4].slice(1, -1));


            $('#32').prepend(lines[45][1].slice(1, -1));
            $('#32 .confirmados').text(lines[45][2].slice(1, -1));
            $('#32 .curados').text(lines[45][3].slice(1, -1));
            $('#32 .obitos').text(lines[45][4].slice(1, -1));
        }
        

    </script>
</body>

</html>